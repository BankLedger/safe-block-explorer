<div data-ng-include src="'views/includes/connection.html'"></div>
<section data-ng-controller="AssetsController" data-ng-init="list(1)">
    <div id="search-form-mobile" class="visible-xs" data-ng-include src="'views/includes/search.html'"></div>

    <div class="row">
        <div class="col-xs-12 col-md-11" >
            <div class=" form-group">
                <h1>
                    <span translate>List of Assets</span>
                </h1>
            </div>
            <!-- PC asset list  start-->
            <div class="hidden-xs" style="height:530px;">

                <table class="table table-hover table-striped">
                    <thead>
                    <tr>
                        <th class="col-xs-3 col-md-4" translate>Asset Name</th>
                        <th translate>Issue Time</th>
                        <th class="text-right" translate>Total Issued</th>
                        <th class="text-right" translate>Circulation</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-show="loading">
                            <td colspan="4">
                                <span translate>Waiting for Assets...</span>
                                <span class="loader-gif"></span>
                            </td>
                        </tr>
                        <tr data-ng-show="!assets.length && loading==false">
                            <td colspan="4">
                                <h2 class="text-center text-muted" translate>No Assets Yet.</h2>
                            </td>
                        </tr>
                        <tr class="fader" data-ng-repeat='a in assets'>
                            <td><img style="width: 30px;" src="{{ a.smallLogo || './img/assetsIcon/logo_24.png' }}">
                                <a href="AssetsDetail/{{a.assetId}}">{{a.assetName}}</a>
                            </td>
                            <td>
                                <span data-ng-show="a.issueTime > 0">{{a.issueTime * 1000 | date:'yyyy-MM-dd HH:mm:ss'}}</span>
                            </td>
                            <td class="text-right">{{a.assetTotalAmount}}</td>
                            <td class="text-right">{{a.alreadyIssueAmount}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- PC asset list end-->

            <!--  Mobile asset list  start-->
            <div class="visible-xs">
                <div data-ng-show="loading">
                    <span>
                        <span translate>Loading...</span>
                        <span class="loader-gif"></span>
                    </span>
                </div>

                <div data-ng-show="!assets.length && loading==false">
                    <span>
                        <h2 class="text-center text-muted" translate>No Assets Yet.</h2>
                    </span>
                </div>

                <div class="app-device">
                    <div class="app_box">
                        <ul class="app_ul" data-ng-repeat='a in assets track by $index'>
                            <li>
                                <div class="app_left"><img src="./img/assetsIcon/logo_96.png"></div>
                                <div class="app_right">
                                    <a href="AssetsDetail/{{a.assetId}}">
                                        <div class="app_icon"><img src="./img/images/narrow.png"></div>
                                        <h2 class="app_h2">{{a.assetName}}</h2>
                                        <span class="time">{{(a.issueTime || now) * 1000 | date:'yyyy-MM-dd HH:mm:ss'}}</span>
                                        <div class="app_num">
                                            <div class="app_div"><span translate>Total Issued</span>：{{a.assetTotalAmount}}</div>
                                            <div class="app_div"><span translate>Circulation</span>：{{a.alreadyIssueAmount}}</div>
                                        </div>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Mobile asset list end-->

            <!-- 宽度小于 768是隐藏 PC page buts start-->
            <div class="hidden-xs" data-ng-show="maxPage > 1">
                <div class="col-md-7 col-sm-7">
                    <div class="text-left">
                        <a class="btn btn-primary" data-ng-click="list(prePage)" data-ng-if="maxPage > 3" translate>Previous</a>
                        <a class="btn {{i.class}}" data-ng-click="list(i.num)" data-ng-show="pageBut.length > 1"
                           style="margin:0px 5px;" data-ng-repeat='i in pageBut'>{{i.num}}</a>
                        <a class="btn btn-primary" data-ng-click="list(nextPage)" data-ng-if="maxPage > 3 " translate>Next</a>
                    </div>
                </div>
                <div class="col-md-5 col-sm-5 text-right">
                    <label style="font-size: 14px;margin-top: 5px;" class="col-md-5  col-sm-5 control-lable"><span translate>Page Count</span>：{{maxPage}}</label>
                    <div class="col-md-4">
                        <input data-ng-model="jumpPage" type="number" id="jumpInput" class="form-control"/>
                    </div>
                    <button class="btn btn-success col-md-3 col-sm-3" data-ng-click="jumpPageBut('list')" translate>Jump To</button>
                </div>
            </div>
            <!-- PC buts end-->

            <!-- 宽度大于768px 时隐藏 mobile buts start-->
            <div class="pages visible-xs" data-ng-show="maxPage > 1">
                <span class="pages_right">
                    <a class="{{i.class}}" data-ng-click="list(i.num)" data-ng-show="pageButM.length > 1" data-ng-repeat='i in pageButM'>{{i.num}}</a>
                </span>
                <span translate>Page Count</span>：{{maxPage}}
            </div>
            <!-- mobile buts end-->
        </div>
    </div>
</section>