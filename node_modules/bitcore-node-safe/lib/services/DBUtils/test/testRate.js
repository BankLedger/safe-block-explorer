"use strict";

var dateStamp =1541760303;// new Date("2018-9-10").getTime() / 1000;

var s = 790;
var e = (0 || 790 + (17280 * 12)) - 50;

var lockedMonth = Math.round((e - s) / 17280);

var startTime = 1535731200;
var endTime = 1546272000;

var num = calculationOfInterest(1000, lockedMonth, dateStamp);
console.log(num);

function calculationOfInterest(value, lockedMonth, time) {
    //todo
    var per = 100;
    // 每个月大概17280个块
    if (time < endTime && time >= startTime) {
        if (value >= 100) {
            var rate = 4;
            if (lockedMonth >= 6) {
                if (lockedMonth >= 12) {
                    rate = 5;
                    lockedMonth = 12;
                }

                var rateOne = [1537027200, 1];
                var rateTwo = [1537891200, 0.5];
                var rateThree = [1539100800, 0.25];

                if (time >= startTime && time < rateOne[0]) {
                    rate += rateOne[1]
                } else if (time > rateOne[0] && time < rateTwo[0]) {
                    rate += rateTwo[1]
                } else if (time > rateTwo[0] && time < rateThree[0]) {
                    rate += rateThree[1]
                }
                rate /= per;
                var lockedValInterest = ((rate * value) ) * (lockedMonth / 12);
                return parseFloat(lockedValInterest.toFixed(4));
            }
        }
    }
    return 0;
}