"use strict";
var mongo = require('mongoskin');
var conf = {
    url: "mongodb://localhost:27017/dashutxo",
    options: {
        server: {
            socketOptions: {
                socketTimeoutMS: 0,
                connectionTimeout: 0
            }
        }
    }
};

var db = mongo.db(conf.url, conf.options, function (err) {
    console.log(self.name + " 构造函数,连接mongodb 出错...[致命错误程序终止]");
    process.exit();
});
db.bind("sealAddress");

test("Xm7L8NBjc2hm41dNLBgW8Dp6A4iFMoibkZ", function (err, result) {
    console.log(err);
    console.log(result);
});

function test(address, cb) {
    db.sealAddress.find({_id: address}).toArray(function (err, address) {
        if (err) {
            return cb(err);
        }
        console.log(address);
        if (address.length > 0) {
            cb(null, address[0].value);
        } else {
            cb(null, 0);
        }
    })
}